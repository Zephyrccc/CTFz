import{d as c,u as w,g as F,r as v,h as d,t as p,l as E,i as f,_ as V,c as R,a as r,w as n,o as b,b as y}from"./index-f48438ef.js";import{E as C,a as L}from"./form-item-b08d89a2.js";import{E as $}from"./button-f8fb6abb.js";import{E as h}from"./input-86eb12f4.js";import"./_initCloneObject-69a7e4eb.js";const B=c({name:"LoginView",components:{},setup(){w();const o=F(),s=v(),a=d({validateUsername:(t,l,e)=>{l===""?e(new Error("用户名不能为空")):e()},validatePassword:(t,l,e)=>{l===""?e(new Error("密码不能为空")):e()},handleLogin:t=>{t&&t.validate(l=>{if(l)E({username:i.loginForm.username,password:i.loginForm.password}).then(e=>{f.success({title:"登录成功",message:"欢迎进入CTFz"}),setTimeout(()=>{o.replace("/challenges")},1e3)},e=>{f.error({title:"登录失败",message:e})});else return!1})}}),i=d({loginForm:{username:"",password:""},loginRules:{username:[{validator:a.validateUsername,trigger:"blur"}],password:[{validator:a.validatePassword,trigger:"blur"}]}});return{loginFormRef:s,...p(i),...p(a)}}});const U={class:"login"};function I(o,s,a,i,t,l){const e=h,m=L,g=$,_=C;return b(),R("div",U,[r(_,{model:o.loginForm,rules:o.loginRules,ref:"loginFormRef","status-icon":"","label-width":"120px",class:"demo-ruleForm",size:"default"},{default:n(()=>[r(m,{label:"用户名",prop:"username"},{default:n(()=>[r(e,{modelValue:o.loginForm.username,"onUpdate:modelValue":s[0]||(s[0]=u=>o.loginForm.username=u)},null,8,["modelValue"])]),_:1}),r(m,{label:"密码",prop:"password"},{default:n(()=>[r(e,{modelValue:o.loginForm.password,"onUpdate:modelValue":s[1]||(s[1]=u=>o.loginForm.password=u),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),r(m,null,{default:n(()=>[r(g,{type:"primary",onClick:s[2]||(s[2]=u=>o.handleLogin(o.loginFormRef))},{default:n(()=>[y("提交")]),_:1})]),_:1})]),_:1},8,["model","rules"])])}const k=V(B,[["render",I],["__scopeId","data-v-d9811ce3"]]);export{k as default};
